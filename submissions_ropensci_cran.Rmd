---
title: "Submissions to rOpenSci and CRAN"
author: "MaÃ«lle Salmon"
date: "`r Sys.Date()`"
output:
  md_document:
    variant: markdown_github
    toc: true
---

# Find submitted packages

```{r, cache = TRUE, warning = FALSE}
library("gh")
creation <- NULL
repo <- NULL
is_ok <- TRUE
page <- 1
while(is_ok){
  issues <- try(gh("/repos/:owner/:repo/issues", owner = "ropensci",
             repo = "onboarding", labels = "package",
             state = "all",
             page = page), silent = TRUE)
  is_ok <- is(issues, "list") & issues[[1]] != ""
  if(is_ok){
  page <- page + 1
  creation <- c(creation, vapply(issues, "[[", "", "created_at"))
  repo <- c(repo, vapply(issues, "[[", "", "body"))
  }
}

repo <- stringr::str_extract(repo, "Package:.*")
repo <- stringr::str_replace(repo, "Package: ", "")
```


```{r, warning = FALSE}
packages <- tibble::tibble(package = repo, 
                           ropensci_submission = lubridate::ymd_hms(creation))

packages <- unique(packages)
packages <- dplyr::filter(packages, !is.na(package))
packages
```

# Find the ones that are on CRAN

```{r}
library("crandb")
#package("ropenaq", version = "all")
```
